/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'Ruben' at '22/10/15 17:32' with Gradle 2.6
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/2.6/userguide/tutorial_java_projects.html
 */
apply plugin: 'java'

repositories {
    jcenter()
}

project(':JAGEmodules') {
	apply plugin: 'java'
	dependencies {
		compile project(':JAGEcore')
	}
}

project(':JAGEcore') {
	apply plugin: 'java'
	apply plugin: 'application'
	dependencies {
		compile project(':JAGEPluginSystem')
	}
	run.dependsOn ":JAGEcore:unpackNatives"
	
	task copyModules(type: Copy, dependsOn: ":JAGEmodules:jar") {
	    from project(":JAGEmodules").jar
	    into("build/modules")
	    include('JAGEmodules.jar')
	}
	
	task copyTest(type: Copy) {
	    from project(":JAGEtest").projectDir.path + "/resources"
	    into("build/")
	}
	
	run.dependsOn copyModules
	run.dependsOn copyTest
}

task debug(dependsOn:":JAGEcore:run") {

}

gradle.taskGraph.whenReady {taskGraph ->
    if (taskGraph.hasTask(debug)) {
        project(':JAGEcore').applicationDefaultJvmArgs = ["-DruningInEclipse=true","-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=8080"]
    } else {
        project(':JAGEcore').applicationDefaultJvmArgs = ["-DruningInEclipse=true"]
    }
}
